<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>jQuery UI Dialog - Modal form</title>
	<link rel="stylesheet" href="development-bundle/themes/base/jquery.ui.all.css">
	<script src="js/jquery-1.7.1.min.js"></script>
	<script src="js/external/jquery.bgiframe-2.1.2.js"></script>
	<script src="development-bundle/ui/jquery.ui.core.js"></script>
	<script src="development-bundle/ui/jquery.ui.widget.js"></script>
	<script src="development-bundle/ui/jquery.ui.mouse.js"></script>
	<script src="development-bundle/ui/jquery.ui.button.js"></script>
	<script src="development-bundle/ui/jquery.ui.draggable.js"></script>
	<script src="development-bundle/ui/jquery.ui.position.js"></script>
	<script src="development-bundle/ui/jquery.ui.resizable.js"></script>
	<script src="development-bundle/ui/jquery.ui.dialog.js"></script>
	<script src="development-bundle/ui/jquery.ui.tabs.js"></script>
	<script src="development-bundle/ui/jquery.effects.core.js"></script>
	<script type="text/javascript" src="nowjs/now.js"></script>

	<style>
		textarea { width: 100%; padding: 10px; border: none; }
		#comment { 
			-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
			-moz-box-sizing: border-box;    /* Firefox, other Gecko */
			box-sizing: border-box;         /* IE 8+ */
		}
		#conversation { 
			-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
			-moz-box-sizing: border-box;    /* Firefox, other Gecko */
			box-sizing: border-box;         /* IE 8+ */
		}
		.ui-widget-content {
			border: none /*{borderColorContent}*/;
		}
		#tabs { height: 380px; } 
		.tabs-bottom { position: relative; } 
		.tabs-bottom .ui-tabs-panel { height: 300px; overflow: auto; } 
		.tabs-bottom .ui-tabs-nav { position: absolute !important; left: 0; bottom: 0; right:0; padding: 0 0.2em 0.2em 0; } 
		.tabs-bottom .ui-tabs-nav li { margin-top: -2px !important; margin-bottom: 1px !important; border-top: none; border-bottom-width: 1px; }
		.ui-tabs-selected { margin-top: -3px !important; }

		.ui-effects-transfer { border: 0.1em dashed black; }
	</style>
	
	<script>
	$(function() {
		var mainButtons = [
			{text: "Invite"
			, 'class': 'invite-button'
			, click: function() {
				// get list of members
				alert('Invite was clicked...');
				//$('#listUpdateMsg').html('<img src="images/loading.gif" title="Updating List...." /> Updating List...');
				//$.ajax({
				//	data: "sid="+Math.random()+"&act=remove&list_id="+list_id+"&prod_id="+prod_id,
				//	url: "ajax/add_to_shooping_list.php",    
				//	type:"POST",
				//	success:function(msg){
				//		var $msgarray = msg.split("|");
				//		$('#listUpdateMsg').html('<div><div class="err"><span class="ui-icon ui-icon-alert" style="float:left; margin:0 0 0 15px;"></span>'+$msgarray[0]+'</div><br />'+$msgarray[1]+'</div>');
				//		$( "#dialog-confirm:ui-dialog" ).dialog( "destroy" );
				//	}
				//}); //end ajax
				}
			} // end Invite button
			, {text: "Options"
			, 'class': 'options-button'
			, click: function() { 
				alert('Options...'); 
				}
			} // end Options button
		] // end mainButtons
		, commentButtons = [
			{text: "Clear"
			, 'class': 'clear-button'
			, click: function() { 
				$('#comment').val('').focus().select();
				}
			} // end Clear button
			, {text: "Post comment"
			, 'class': 'post-comment-button'
			, click: function() { 
			   now.distributeMessage($("#comment").val());
			   $("#comment").val("");
			}
			//, icons: {primary:'ui-icon-gear',secondary:'ui-icon-triangle-1-s'}
			//, icons: {
			//	primary: 'ui-icon-disk'
			//}
			} // end Post comment
		] // end commentButtons
		
		$( "#form" ).dialog({
			autoOpen: false
			, height: 535
			, width: 700
			, modal: true
			, position: ['center', 35]
			, buttons: mainButtons
		});	
		//remove ui-widget-header
		//$( ".ui-widget-header " ).remove();
		//$( " .ui-dialog-titlebar-close, .ui-corner-all").add();

		$( "#user-form" )
			.button()
			.click(function() {
				$(this).effect("transfer",{ to: $("#form") }, 1500);
				$( "#form" ).dialog( "open" );
				$( ".invite-button" ).button({ icons: {primary:'ui-icon-person',secondary:'ui-icon-triangle-1-s'} });
				$( ".options-button" ).button({ icons: {primary:'ui-icon-gear'} });
			});

		// Add comment...
		$("#comment, .comment").click(function(){
			$('#comment').focus().select();
			$("#form").dialog({buttons: commentButtons});
			$( ".post-comment-button" ).button({ icons: {primary:'ui-icon-comment'} });
			$( ".clear-button" ).button({ icons: {primary:'ui-icon-refresh'} });
		}); //Add comment

		$("#conversation, .conversation").click(function(){
			$('#comment').focus().select();
			$("#form").dialog({buttons: commentButtons});
			//$( ".post-comment-button" ).button({ icons: {primary:'ui-icon-comment'} });
			//$( /".clear-button" ).button({ icons: {primary:'ui-icon-refresh'} });
		}); //Add comment

		// Bind back the Invite, Options buttons
		$(".files, .email, .event, .map").click(function(){
			$("#form").dialog({buttons: mainButtons});
			$( ".invite-button" ).button({ icons: {primary:'ui-icon-person',secondary:'ui-icon-triangle-1-s'} });
			$( ".options-button" ).button({ icons: {primary:'ui-icon-gear'} });
		});
		
		// Tabs
		$( "#tabs" ).tabs();
		$( ".tabs-bottom .ui-tabs-nav, .ui-tabs-nav > *" )
			.removeClass( "ui-widget-header" )
			.addClass( "ui-corner-bottom" );

		});
		$(document).ready(function() {
			now.receiveMessage = function( name, message ) {
				$("#conversation").append( name + ":" + message + "\n" );
			};
			now.name = prompt("Name?" );
		});	
	</script>
	<script type="text/javascript">
  	now.ready(function(){
    	// "Hello World!" will print on server
    	now.logStuff("Hello World!");
		});
	</script>
</head>
<body>

<div class="demo">

<div id="form">
	<div id="tabs" class="tabs-bottom">
		<ul>
			<li><a href="#tab-0" class="comment">Add comment</a></li>
			<li><a href="#tab-1" class="files">Files</a></li>
			<li><a href="#tab-2" class="email">Email</a></li>
			<li><a href="#tab-3" class="event">Event</a></li>
			<li><a href="#tab-4" class="map">Map</a></li>
		</ul>
		<div id="tab-0">
			<form>
				<textarea id="conversation" rows="9" cols="10"></textarea>
				<textarea id="comment" rows="2" cols="10">Add your comment...</textarea>
			</form>
	    </div>
		<div id="tab-1">
			Nam dui erat, auctor a, dignissim quis, sollicitudin eu, felis. Pellentesque nisi urna, interdum eget, sagittis et, consequat vestibulum, lacus. Mauris porttitor ullamcorper augue.
		</div>
		<div id="tab-2">Nam dui erat, auctor a, dignissim quis, sollicitudin eu, felis. Pellentesque nisi urna, interdum eget, sagittis et, consequat vestibulum, lacus. Mauris porttitor ullamcorper augue.</div>
		<div id="tab-3">Nam dui erat, auctor a, dignissim quis, sollicitudin eu, felis. Pellentesque nisi urna, interdum eget, sagittis et, consequat vestibulum, lacus. Mauris porttitor ullamcorper augue.</div>
		<div id="tab-4">Nam dui erat, auctor a, dignissim quis, sollicitudin eu, felis. Pellentesque nisi urna, interdum eget, sagittis et, consequat vestibulum, lacus. Mauris porttitor ullamcorper augue.</div>
	</div>
</div>


<div id="users-contain" class="ui-widget">
	<h1>Map</h1>
</div>
<button id="user-form">Open</button>
<div class="empty_box"> My Invite box....</div>
</div><!-- End demo -->

</body>
</html>

